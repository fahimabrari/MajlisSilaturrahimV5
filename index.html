<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Wedding Invitation</title>
    <style>
        /* --- 1. CONFIGURATION --- */
        :root {
            --bg-color: #f0eee6; /* Match your image background */
            --gold: #b08d57;
        }

        * { box-sizing: border-box; }
        
        body, html {
            margin: 0;
            padding: 0;
            width: 100%;
            height: 100%; 
            background-color: var(--bg-color);
            font-family: 'Segoe UI', Arial, sans-serif;
            overflow: hidden; /* Stops the whole page from bouncing */
        }

        /* --- 2. MAIN SCROLL CONTAINER --- */
        .card-container {
            width: 100%;
            height: 100%;
            overflow-y: scroll;
            scroll-snap-type: y mandatory;
            -webkit-overflow-scrolling: touch;
        }

        /* --- 3. PAGE WRAPPERS --- */
        .page-wrapper {
            position: relative;
            width: 100%;
            height: 100%;
            scroll-snap-align: start;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: var(--bg-color);
            
            /* Safe areas for notches */
            padding-top: env(safe-area-inset-top);
            padding-bottom: env(safe-area-inset-bottom);
        }

        .image-container {
            position: relative;
            height: 100%;
            width: auto;
            /* Maintain Aspect Ratio */
            aspect-ratio: 9 / 16; 
            
            display: flex;
            justify-content: center;
            align-items: center;
            box-shadow: 0 0 20px rgba(0,0,0,0.05);
        }

        /* Mobile Responsive Constraints */
        @media (max-aspect-ratio: 9/16) {
            .image-container {
                width: 100%;
                height: auto;
            }
        }

        .page-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            display: block;
        }

        /* --- 4. MAP LINKS --- */
        .map-link {
            position: absolute;
            width: 14%; 
            height: 8%;
            background: rgba(255, 0, 0, 0); /* Transparent */
            z-index: 10;
            border-radius: 50%;
            cursor: pointer;
        }
        .waze { bottom: 6%; left: 34%; }
        .gmap { bottom: 6%; right: 34%; }

        /* --- 5. RSVP FORM (STABLE POSITION) --- */
        .rsvp-overlay {
            position: absolute;
            /* Locked position from top */
            top: 38%; 
            /* Center Horizontal */
            left: 50%;
            transform: translateX(-50%);
            
            width: 75%; 
            display: flex;
            flex-direction: column;
            gap: 12px;
            z-index: 20;
        }

        .rsvp-overlay input, 
        .rsvp-overlay select {
            padding: 12px;
            border-radius: 8px;
            border: 1px solid #ccc;
            font-size: 16px;
            background: rgba(255,255,255,0.95);
            width: 100%;
            box-shadow: 0 2px 5px rgba(0,0,0,0.1);
        }

        .rsvp-submit {
            background-color: var(--gold);
            color: white;
            padding: 14px;
            border: none;
            border-radius: 8px;
            font-weight: bold;
            font-size: 16px;
            cursor: pointer;
            box-shadow: 0 4px 6px rgba(0,0,0,0.15);
        }
        
        .rsvp-submit:active { transform: scale(0.98); }

        #msg {
            text-align: center;
            font-size: 14px;
            color: #555;
            background: rgba(255,255,255,0.9);
            padding: 8px;
            border-radius: 6px;
            margin-top: 5px;
            display: none;
        }
    </style>
</head>
<body>

    <div class="card-container">
        
        <div class="page-wrapper">
            <div class="image-container">
                <img src="page1.png" class="page-img" alt="Cover">
            </div>
        </div>

        <div class="page-wrapper">
            <div class="image-container">
                <img src="page2.png" class="page-img" alt="Map">
                
                <a class="map-link waze" 
                   href="https://waze.com/ul?q=1%2C+Jln+Pulau+Tioman+U10%2F94A%2C+40150%2C+Selangor&navigate=yes" 
                   target="_blank">
                </a>
                
                <a class="map-link gmap" 
                   href="https://www.google.com/maps/dir/?api=1&destination=1%2C+Jln+Pulau+Tioman+U10%2F94A%2C+40150%2C+Selangor" 
                   target="_blank">
                </a>
            </div>
        </div>

        <div class="page-wrapper">
            <div class="image-container">
                <img src="page3.png" class="page-img" alt="RSVP">
                
                <div class="rsvp-overlay">
                    <input id="name" type="text" placeholder="Nama Penuh" required>
                    <select id="attendance">
                        <option value="Hadir">Hadir</option>
                        <option value="Tidak Hadir">Tidak Hadir</option>
                    </select>
                    <select id="pax">
                        <option value="1">1 Orang</option>
                        <option value="2">2 Orang</option>
                        <option value="3">3 Orang</option>
                        <option value="4">4 Orang</option>
                        <option value="5">5 Orang</option>
                    </select>
                    <button class="rsvp-submit" onclick="sendRSVP()">Hantar RSVP</button>
                    <p id="msg"></p>
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- 1. ANDROID KEYBOARD STABILIZER ---
        // Keeps the background size consistent when keyboard opens
        const setAppHeight = () => {
            const doc = document.documentElement;
            // Only update if width changes (orientation change), otherwise ignore (keyboard)
            if (window.innerWidth !== doc.getAttribute('data-width')) {
                doc.style.setProperty('--app-height', `${window.innerHeight}px`);
                doc.setAttribute('data-width', window.innerWidth);
            }
        }
        window.addEventListener('resize', setAppHeight);
        setAppHeight();

        // --- 2. RSVP LOGIC ---
        const attendance = document.getElementById('attendance');
        const pax = document.getElementById('pax');

        attendance.addEventListener('change', () => {
            if(attendance.value === 'Tidak Hadir') {
                pax.value = "1";
                pax.disabled = true;
                pax.style.opacity = "0.5";
            } else {
                pax.disabled = false;
                pax.style.opacity = "1";
            }
        });

        // --- 3. SEND DATA ---
        function sendRSVP() {
            const name = document.getElementById('name').value.trim();
            const att = attendance.value;
            const px = pax.value;
            const msg = document.getElementById('msg');
            
            msg.style.display = 'block';

            if(!name) { 
                msg.innerText = "Sila masukkan nama anda."; 
                msg.style.color = "red";
                return; 
            }
            
            msg.innerText = "Sedang menghantar...";
            msg.style.color = "#555";

            // ðŸ‘‡ PASTE YOUR GOOGLE SCRIPT URL HERE ðŸ‘‡
            const scriptURL = 'https://script.google.com/macros/s/AKfycbyY2ubqEkrrKTn45JhUpZAz81HuBGRoa0iABL_LDTqWirl1ZL6NwZWr2QxGtOoHqtpF/exec';

            fetch(scriptURL, {
                method: 'POST',
                mode: 'no-cors',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ name: name, attendance: att, pax: px })
            })
            .then(() => {
                msg.style.color = "green";
                msg.innerText = "Terima kasih! Kehadiran direkodkan.";
                document.getElementById('name').value = "";
            })
            .catch(e => {
                msg.style.color = "red";
                msg.innerText = "Ralat. Sila cuba lagi.";
            });
        }
    </script>
</body>
</html>
